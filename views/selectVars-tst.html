<!DOCTYPE html>
<html>
<head>
    <title>Plataforma de Consultas de dados censitários</title>
    <!--<script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.2/angular.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.min.js"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/angular-ui-router/1.0.0-rc.1/angular-ui-router.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--Font-awesome -->
    <!--<script src="https://use.fontawesome.com/a3662961ef.js"></script>-->
    <link rel="stylesheet" href="stylesheets/font-awesome-4.7.0/css/font-awesome.min.css"/>
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <!-- datatables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/select/1.2.3/css/select.bootstrap.min.css">
    <!-- Bootstrap select -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
    <!-- CensoApp css, js-->
    <link rel='stylesheet' href='/stylesheets/style.css'/>
    <script src="javascripts/layout.js" type="text/javascript"></script>
    <!-- <script src="javascripts/censoApp.js" type="text/javascript"></script> -->
    <script src="javascripts/selectVars.js" type="text/javascript"></script>
    <script src="javascripts/controlsIndex.js" type="text/javascript"></script>
    <!-- Bootbox, para mensagens em Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109958923-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-109958923-1');
    </script>
</head>

<!-- ******************************** -->
<!-- ng-controller = submitController -->
<!-- ******************************** -->
<body  ng-app="selectVars" ng-controller="submitController">
<header>
    <!-- Image and text -->
    <nav class="navbar navbar-expand-md fixed-top navbar-dark bg-dark-green">
        <!-- Section: toogler -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01"
                aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!-- End Section: toogler -->
        <!-- Section: logo -->
        <a class="navbar-brand" href="http://centrodametropole.fflch.usp.br">
            <img src="images/logo-cem-nome-completo-v.png" height="70" class="d-inline-block align-top" alt="">
            <label style="margin-top: 10px;">Plataforma de Consulta <br> de Dados Censitários</label>
        </a>
        <!-- End Section:logo -->
        <!-- Section: icons -->
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
            <!-- Left menu -->
            <!--<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Extrair dados<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Links importantes</a>
                </li>
            </ul>-->
            <!-- Right menu -->
            <ul class="navbar-nav ml-auto">
                <li class="dropdown nav-item">
                    <a href="http://200.144.244.241/foruns/" class="nav-link" title="Forum de discussões sobre a plataforma de extração de dados censitários">
                        <i class="fa fa-2x fa-comments"></i> Acesse o Forum
                    </a>
                </li>
                <!--<li class="dropdown nav-item">
                    <a href="javascript:;" class="nav-link"  data-toggle="modal" data-target="#aboutProjectModal">
                        <i class="fa fa-2x fa-question-circle"></i>
                    </a>
                </li>-->
                <!--<li class="dropdown nav-item">
                    <a href="javascript:;" class="nav-link dropdown-toggle" id="notificationsDropDown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-2x fa-bell"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="notificationsDropDown">
                        <li class="dropdown-item">
                            <span class="label label-default">Você tem ... notificações.</span>
                        </li>
                        <li class="dropdown-item">
                            <a href="javascript:;"><i class="fa fa-file-archive-o"></i> O arquivo solicitado foi gerado</a>
                        </li>
                        <div class="dropdown-divider"></div>
                        <li class="dropdown-item">
                            <a href="javascript:;"> Todas as notificações</a>
                        </li>
                    </ul>
                </li>-->
                <!--<li class="dropdown nav-item">
                    <a href="javascript:;" class="nav-link dropdown-toggle" id="userDropDown"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-2x fa-user"></i> Usuário
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropDown">
                        <li class="dropdown-item">
                            <a href="javascript:;"><i class="fa fa-fw fa-user"></i> Perfil</a>
                        </li>
                        <li class="dropdown-item">
                            <a href="javascript:;"><i class="fa fa-fw fa-envelope"></i> Caixa de entrada</a>
                        </li>
                        <li class="dropdown-item">
                            <a href="javascript:;"><i class="fa fa-fw fa-gear"></i> Configuraçãoes</a>
                        </li>
                        <div class="dropdown-divider"></div>
                        <li class="dropdown-item">
                            <a href="javascript:;"><i class="fa fa-fw fa-power-off"></i> Sair</a>
                        </li>
                    </ul>
                </li>-->

                <li class="dropdown nav-item">
                    <a href="javascript:;" class="nav-link dropdown-toggle" id="languagesDropDown"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-2x fa-language"></i> Idiomas
                    </a>
                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="languagesDropDown">
                        <li class="dropdown-item">
                            <a href="javascript:;"> Português</a>
                        </li>
                        <li class="dropdown-item">
                            <a href="javascript:;"> English</a>
                        </li>
                        <li class="dropdown-item">
                            <a href="javascript:;"> Spanish</a>
                        </li>
                    </ul>
                </li>

            </ul>
        </div>
        <!-- End Section: icons-->
    </nav>
</header>
<main role="main" class="container-fluid"  style="margin-top:110px;">
    <!-- Row 00 -->
    <div class="row" style="margin-bottom: 10px;">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body" style="padding-bottom:1px">
                    <!-- ROW: TABELAS-->
                    <div style="text-align:center">
                        <!--<button class="btn btn-outline-dark btn-tables-circle" style="margin-right: 10px;" onclick="">
                            <i class="fa fa-user-o"></i>
                        </button>
                        <button class="btn btn-outline-dark btn-tables-circle" style="margin-right: 10px;" >
                            <i class="fa fa-home"></i>
                        </button>
                        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect btn btn-secondary" style="margin-right: 10px;" data-upgraded=",MaterialButton,MaterialRipple">
                            <i class="fa fa-3x fa-home"></i>
                            <span class="mdl-button__ripple-container"><span class="mdl-ripple is-animating" style="width: 160.392px; height: 160.392px; transform: translate(-50%, -50%) translate(30px, 33px);"></span></span>
                        </button>-->

                        <!-- ******************************** -->
                        <!-- ng-controller = tablesController -->
                        <!-- ******************************** -->

                        <h4 class="text-dark-green"><b>PASSO 3.</b> SELECIONAR VARIÁVEIS</h4>
                        <h6 class="text-dark-green" style="text-align:left">
                            <div ng-if="parameters.tabela=='tPes'" ><b>Tipo de dados:</b> PESSOA</div>
                            <div ng-if="parameters.tabela=='tDom'"><b>Tipo de dados:</b> DOMICILIO</div>
                        </h6>
                        <h6 class="text-dark-green" style="text-align:left">
                            <div style="float:left"><b>Censos:</b></div>
                            <div ng-repeat="anoCenso in parameters.anoPad" style="float:left">
                                &nbsp;{{anoCenso}}

                            </div>
                        </h6>
                        <br><br>
                        <div>
                            <button id="btnConfSolic" class="form-group btn bg-dark-green" style="margin-left:0px;width:40px;float:left;padding:0 0 0 0"
                                    type="submit" ng-click="changeCensosBackButtom()" title="Clique para alterar tipo e dados ou censos">
                            <i class="fa fa-arrow-circle-left" style="text-align:center;padding:0px"></i>
                            </button>
                            <div style="text-align:left;padding:5px">&nbsp;Alterar Censos ou Tipo de dados</div>
                        </div>
                        <div ng-controller="tablesController as ctrl" style="text-align: center; margin-bottom: 20px;display:none">


                            <!--  style="display:none" -->
                            <select id="colecao" name="colecao" class="form-control input-sm" onchange="changeFkCollection()" ng-model="parameters.tabela" ng-change="updateVars()" style="display:none">
                                <option value="">Selecione um tipo</option>
                                <option value="tDom">Domicílio</option>
                                <option value="tPes">Pessoa</option>
                            </select>


                            <div data-toggle="buttons" onchange="changeCollection()">
                                <span class="text-dark" style="font-size: 1rem; font-weight: 600; padding-right: 15px;">PESSOA</span>
                                <label class="btn btn-outline-dark btn-tables-circle btn-lg" title="Pessoa" style="margin-right: 20px;">
                                    <input type="radio" id="radio01" name="typeSel" value="tPes" ng-change="ctrl.updateVars()" ng-model="parameters.tabela"><i class="fa fa-user-o"></i>
                                </label>

                                <label class="btn btn-outline-dark btn-tables-circle btn-lg"  title="Domicílio">
                                    <input type="radio" id="radio02" name="typeSel" value="tDom" ng-change="ctrl.updateVars()" ng-model="parameters.tabela"><i class="fa fa-home"></i>
                                </label>
                                <span class="text-dark"  style="font-size: 1rem; font-weight: 600; padding-left: 15px;"> DOMICILIO </span>
                            </div>


                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Row 01 -->
    <div class="row">
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header card-header-title">
                    <i class="fa fa-database fa-fw"></i> <b>PASSO 3.1</b> SELEÇÃO DE VARIÁVEIS PADRONIZADAS OU ORIGINAIS
                </div>
                <div class="card-body">

                    <!-- Início tabs -->

                    <!-- Nav tabs -->
                    <!-- ng-class="{'btn btn-outline-dark btn-tables-circle btn-lg':true, 'active':parameters.tPesClicked}"  ng-model="parameters.abaOriginais"-->
                    <ul class="nav nav-tabs" id="variablesTab" role="tablist">
                        <li class="nav-item">
                            <!-- <a class="nav-link"  href="#padVarTab" id="padVar-tab" aria-controls="padVarTab" -->
                            <a ng-class="{'nav-link':true, 'active':!parameters.abaOriginais}"  href="#padVarTab" id="padVar-tab" aria-controls="padVarTab"
                            role="tab" data-toggle="tab" aria-selected="true" title="Seleção de variáveis padronizadas" ng-click="parameters.abaOriginais = false"><b>VARIÁVEIS PADRONIZADAS</b></a>
                        </li>
                        <li class="nav-item">
                            <!-- <a class="nav-link active" href="#origVarTab" id="origVar-tab" aria-controls="origVarTab" -->
                            <a ng-class="{'nav-link':true, 'active':parameters.abaOriginais}" href="#origVarTab" id="origVar-tab" aria-controls="origVarTab"
                            role="tab" data-toggle="tab" aria-selected="false" title="Seleção de variáveis originais" ng-click="parameters.abaOriginais = true"><b>VARIÁVEIS ORIGINAIS</b></a>
                        </li>
                    </ul>
                    <!-- Tab panels -->
                    <div class="tab-content" id="variablesInfoTabContent">


                        <!-- ******************************** -->
                        <!-- INÍCIO TAB VARIÁVEIS PADRONIZADAS -->
                        <!-- ******************************** -->

                        <!-- ng-class="{'nav-link':true, 'active':parameters.abaPadronizadas}" -->
                        <!-- <div role="tabpanel" class="tab-pane fade" id="padVarTab" aria-labelledby="padVar-tab" style="margin-left:10px;height:450px;overflow-y:auto"> -->
                        <div role="tabpanel" ng-class="{'tab-pane':true, 'fade':true, 'show':!parameters.abaOriginais, 'active':!parameters.abaOriginais}" id="padVarTab" aria-labelledby="padVar-tab" style="margin-left:10px;height:450px;overflow-y:auto">
                            <br>
                            <div>
                                <!-- ******************************** -->
                                <!-- ng-controller = themeController  -->
                                <!-- ******************************** -->
                                <div class="form-group" ng-controller="themePadController">
                                    <label for="themePad" style="font-weight: 600;">3.2. SELECIONAR UM TEMA DE VARIÁVEIS PADRONIZADAS:</label><br>
                                    <select id="themePad" name="themePad" class="form-control col" onchange="changeTheme()" ng-model="parameters.themePad" ng-change="changeThemePad()">
                                        <!-- <option value="">Selecione um ano</option> -->
                                        <option value="">Selecione um tema</option>
                                        <option value="{{item}}" ng-repeat="item in data.themesPad">{{item.label}}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="tab-content" id="variablesTabContent">
                                <div id="censo2010" class="tab-pane show active" role="tabpanel" aria-labelledby="censo2010-tab">
                                    <!-- *********************************** -->
                                    <!-- ng-controller = variaveisPadController -->
                                    <!-- *********************************** -->
                                    <div class="form-group" ng-controller="variaveisPadController">
                                        <br>
                                        <label for="variavelPad" style="font-weight: 600;">3.3 VARIÁVEIS PADRONIZADAS DE TEMA{{temaEscolhido}}:</label>
                                        <br>

                                        <div id="tableVarPadHolder" style="height:220px;overflow:auto">
                                            <table id = "variavelPad" name="variaveisPad[]"  class="table table-hover table-condensed" size="10px"
                                                style="height:0px;" ng-model="parameters.variaveisPad">
                                                <tr>
                                                    <!-- <th><input type="checkbox" id="selectBox"></th> -->
                                                    <th style="vertical-align:middle;width:10px;padding:2px 10px 2px 2px">Selecionar</th>
                                                    <th>Código</th>
                                                    <th></th>
                                                    <th>Descrição</th>
                                                    <div ng-repeat="item2 in data[0].variaveisPad.collection.variable.year">
                                                    <th style="vertical-align:middle;width:5px;padding:2px 10px 2px 2px" ng-repeat="item2 in parameters.anoPad">{{item2}}</th>
                                                    </div>
                                                </tr>
                                                <tr ng-repeat="item in data.variaveisPad" class="{{item.collection.variable.disabled}}">
                                                    <td style="vertical-align:middle;text-align:center">
                                                        <input type="checkbox" id="selectBox"  ng-model=item.collection.variable.checked ng-change="submitSelectPadFromTable(item.collection.variable)">
                                                    </td>
                                                    <!--
                                                    <td style="vertical-align:middle;width:5px;">
                                                        <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item)"></i>
                                                        </a>
                                                    </td> <!-- InfoVar(item) -->
                                                    <td style="vertical-align:middle;width:30px;">{{item.collection.variable.varCode}}</td>
                                                    <td style="vertical-align:middle;width:5px;">
                                                        <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item.collection.variable)"></i>
                                                        </a>
                                                    </td> <!-- InfoVar(item) -->
                                                    <td style="vertical-align:middle;">{{item.collection.variable.description}}</td>

                                                    <!-- <div ng-repeat="item2 in item.collection.variable.year"> --
                                                    <td style="vertical-align:middle;text-align:center" ng-repeat="item2 in item.collection.variable.year">
                                                        <div ng-if="item2 == parameters.anoPad[$index]">X</div>
                                                        <div ng-if="item2 != parameters.anoPad[$index]">-</div>
                                                    </td>
                                                    -->
                                                    <td style="vertical-align:middle;text-align:center" ng-repeat="censoYear in parameters.anoPad">
                                                        <div ng-if="item.collection.variable.year.indexOf (censoYear) == -1">-</div>
                                                        <div ng-if="item.collection.variable.year.indexOf (censoYear) > -1"><i class="fa fa-check"></i></div>
                                                    </td>
    
                                                    <!--
                                                    <td style="vertical-align:middle;text-align:center">{{item2}}</td>
                                                    <td style="vertical-align:middle;text-align:center">.</td>
                                                    <td style="vertical-align:middle;text-align:center">X</td>
                                                    <td style="vertical-align:middle;text-align:center">.</td>
                                                    -->

                                                    <!-- </div> -->
                                                    <!--
                                                    <td style="text-align:center;vertical-align:middle;"><input type="checkbox" id="V0001"></td>
                                                    <td>>= d</td>
                                                    <td><a data-toggle="modal" data-target="#GSCCModal">Editar 1 2 3 </a></td>
                                                    -->
                                                </tr>
                                            </table>
                                        </div> <!-- <div id="tableSelectedHolder"> -->

                                    </div> <!-- div class="form-group" ng-controller="variaveisPadController" -->
                                </div> <!-- div id="censo2010" class="tab-pane show active" -->

                            </div> <!-- div class="tab-content" id="variablesTabContent" -->

                        </div>
                        

                        <!-- ******************************** -->
                        <!-- INÍCIO TAB VARIÁVEIS ORIGINAIS -->
                        <!-- ******************************** -->
                        <!--
                        <div role="tabpanel" class="tab-pane fade show active" id="padVarTab" aria-labelledby="padVar-tab" style="margin-left:10px;height:450px;overflow-y:auto">
                        -->
                                
                        <!-- <div role="tabpanel" class="tab-pane fade show active" id="origVarTab" aria-labelledby="origVar-tab" style="margin-left:10px;height:450px;overflow-y:auto"> -->
                        <div role="tabpanel" ng-class="{'tab-pane':true, 'fade':true, 'show':parameters.abaOriginais, 'active':parameters.abaOriginais}" id="origVarTab" aria-labelledby="origVar-tab" style="margin-left:10px;height:450px;overflow-y:auto">
                            <br>
                            <p style="white-space:pre-wrap;display:none">Variáveis Originais</p>

                            <div>
                                <!-- ******************************** -->
                                <!-- ng-controller = themController  -->
                                <!-- ******************************** -->
                                <div class="form-group" ng-controller="themeController">
                                    <label for="theme" style="font-weight: 600;">3.2. SELECIONAR UM TEMA DE VARIÁVEIS ORIGINAIS:</label><br>
                                    <select id="theme" name="theme" class="form-control col" onchange="changeTheme()" ng-model="parameters.theme" ng-change="changeTheme()">
                                        <!-- <option value="">Selecione um ano</option> -->
                                        <option value="">Selecione um tema</option>
                                        <option value="{{item}}" ng-repeat="item in data.themes">{{item.label}}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- ******************************** -->
                            <!-- ng-controller = yearsController  -->
                            <!-- ******************************** -->
                            <label style="font-weight: 600;">3.3. CENSOS: (Variáveis agrupadas por ano do Censo)</label>
                            <small class='form-text text-muted'>Escolha o ano do Censo do qual você deseja selecionar variáveis.</small>
                            

                            <!--
                            <div class="form-group" ng-controller="yearsController" style="margin-left:10px;">
                                <select multiple size="4" id="ano" name="ano" class="form-control input-sm" onchange="changeCenso()" ng-model="parameters.ano" ng-change="changeCenso()" style = "min-width:120px">
                                    <option value="{{item.year}}" ng-repeat="item in data.years">{{item.year}}</option>
                                </select>
                            </div>
                            <!-- ROW: ANOS E VARIAVEIS -->

                            <!-- role="tab" aria-controls="censo2010" aria-selected="true"  href="#censo{{censoYear}}" onclick="clickCenso(this)"  -->
                            <div class="form-group" ng-controller="yearsController" style="margin: 15px 0px 0px 10px">
                                <ul class="nav nav-pills nav-fill" style="font-weight:600; font-size:1.3em;">
                                    <!-- data-toggle="tab"  -->
                                    <li class="nav-item" ng-repeat="censoYear in parameters.anoPad" ng-model="parameters.ano" ng-click="changeCenso(censoYear)">
                                        <a ng-class="{'nav-link':true, 'active':parameters.ano==censoYear}"  id="censo2010-tab" data-toggle="tab" style="max-width:100px"
                                        value="{{censoYear}}" href="#censo{{censoYear}}">{{censoYear}}</a>
                                    </li>
                                </ul>
                            </div>
                            <!--
                            <ul>
                                <li ng-repeat="censoYear in parameters.anoPad" ng-click="changeCenso()">{{censoYear}}</li>
                            </ul>
                            -->

                            <div class="tab-content" id="variablesTabContent" style:"margin-top:0px">
                                <div id="censo2010" class="tab-pane show active" role="tabpanel" aria-labelledby="censo2010-tab">
                                    <!-- *********************************** -->
                                    <!-- ng-controller = variaveisController -->
                                    <!-- *********************************** -->
                                    <div class="form-group" ng-controller="variaveisController">
                                        <br>
                                        <label for="variavel" style="font-weight: 600;">2.3. VARIÁVEIS DE TEMA{{temaEscolhido}}:</label>
                                        <br>

                                        <div id="tableVarHolder" style="height:220px;overflow:auto">
                                            <table id = "variavel" name="variaveis[]"  class="table table-hover table-condensed" size="10px"
                                                style="height:0px;" ng-model="parameters.variaveis">
                                                <tr>
                                                    <!-- <th><input type="checkbox" id="selectBox"></th> -->
                                                    <th style="vertical-align:middle;width:10px">Selecionar</th>
                                                    <th style="vertical-align:middle;width:10px">Ano</th>
                                                    <th>Código</th>
                                                    <th></th>
                                                    <th>Descrição</th>
                                                    <!-- <th></th> -->
                                                </tr>
                                                <tr ng-repeat="item in data.variaveis" class="{{item.collection.variable.disabled}}">
                                                    <td style="vertical-align:middle;text-align:center">
                                                        <input type="checkbox" id="selectBox"  ng-model=item.collection.variable.checked ng-change="submitSelectFromTable(item.collection.variable)">
                                                    </td>
                                                    <!--
                                                    <td style="vertical-align:middle;width:5px;">
                                                        <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item)"></i>
                                                        </a>
                                                    </td> <!-- InfoVar(item) -->
                                                    <td style="vertical-align:middle;text-align:center">{{item.collection.variable.yearToShow}}</td>
                                                    <td style="vertical-align:middle;width:30px;">{{item.collection.variable.varCode}}</td>
                                                    <td style="vertical-align:middle;width:5px;">
                                                        <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item.collection.variable)"></i>
                                                        </a>
                                                    </td> <!-- InfoVar(item) -->
                                                    <td style="vertical-align:middle;">{{item.collection.variable.label}}</td>
                                                    <!--
                                                    <td style="text-align:center;vertical-align:middle;"><input type="checkbox" id="V0001"></td>
                                                    <td>>= d</td>
                                                    <td><a data-toggle="modal" data-target="#GSCCModal">Editar 1 2 3 </a></td>
                                                    -->
                                                </tr>
                                            </table>
                                        </div> <!-- <div id="tableSelectedHolder"> -->

                                    </div> <!-- div class="form-group" ng-controller="variaveisController" -->
                                </div> <!-- div id="censo2010" class="tab-pane show active" -->

                            </div> <!-- div class="tab-content" id="variablesTabContent" -->




                        </div>
                    </div>



                    
                    <!-- Início tab Variáveis padronizadas -->

                    <!-- Fim tab Variáveis padronizadas -->


                    <!-- Início tab Variáveis originais -->
                    <div style="display:none">
                    <!-- ROW: TEMA -->
                    <div>
                        <!-- ******************************** -->
                        <!-- ng-controller = themController  -->
                        <!-- ******************************** -->
                        <div class="form-group" ng-controller="themeController">
                            <label for="theme" style="font-weight: 600;">2.1. SELECIONAR UM TEMA:</label><br>
                            <select id="theme" name="theme" class="form-control col" onchange="changeTheme()" ng-model="parameters.theme" ng-change="changeTheme()">
                                <!-- <option value="">Selecione um ano</option> -->
                                <option value="">Selecione um tema</option>
                                <option value="{{item}}" ng-repeat="item in data.themes">{{item.label}}</option>
                            </select>
                        </div>
                    </div>
                    <!-- ******************************** -->
                    <!-- ng-controller = yearsController  -->
                    <!-- ******************************** -->
                    <!--
                    <label style="font-weight: 600;">2.2. CENSOS: (Variáveis agrupadas por ano do Censo)</label>
                    <small id='emailHelp' class='form-text text-muted'>Escolha o ano do Censo do qual você deseja selecionar variáveis.</small>
                    <div class="form-group" ng-controller="yearsController" style="margin-left:10px;">
                        <select multiple size="4" id="ano" name="ano" class="form-control input-sm" onchange="changeCenso()" ng-model="parameters.ano" ng-change="changeCenso()" style = "min-width:120px;display:none">
                            <option value="{{item.year}}" ng-repeat="item in data.years">{{item.year}}</option>
                        </select>
                    </div>
                    <!-- ROW: ANOS E VARIAVEIS -->

                    <ul class="nav nav-pills nav-fill" style="font-weight:600; font-size:1.3em;">
                        <!-- <li class="nav-item active"> -->
                        <li class="nav-item active">
                            <!-- <a class="nav-link active"  id="censo2010-tab" data-toggle="tab" -->
                            <a class="nav-link"  id="censo2010-tab" data-toggle="tab"
                               role="tab" aria-controls="censo2010" aria-selected="true" href="#censo2010" onclick="clickCenso(2010)">2010</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link "  id="censo2000-tab" data-toggle="tab"
                               role="tab" aria-controls="censo2000" aria-selected="false" href="#censo2000" onclick="clickCenso(2000)">2000</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link "  id="censo1991-tab" data-toggle="tab"
                               role="tab" aria-controls="censo1991" aria-selected="false" href="#censo1991" onclick="clickCenso(1991)">1991</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link "  id="censo1980-tab" data-toggle="tab"
                               role="tab" aria-controls="censo1980" aria-selected="false" href="#censo1980" onclick="clickCenso(1980)">1980</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link "  id="censo1970-tab" data-toggle="tab"
                               role="tab" aria-controls="censo1970" aria-selected="false" href="#censo1970" onclick="clickCenso(1970)">1970</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link "  id="censo1960-tab" data-toggle="tab"
                               role="tab" aria-controls="censo1960" aria-selected="false" href="#censo1960" onclick="clickCenso(1960)">1960</a>
                        </li>
                    </ul>

                    <div class="tab-content" id="variablesTabContent">
                        <div id="censo2010" class="tab-pane show active" role="tabpanel" aria-labelledby="censo2010-tab">
                            <!-- *********************************** -->
                            <!-- ng-controller = variaveisController -->
                            <!-- *********************************** -->
                            <div class="form-group" ng-controller="variaveisController">
                                <br>
                                <label for="variavel" style="font-weight: 600;">2.3. VARIÁVEIS DE TEMA{{temaEscolhido}}:</label>
                                <br>
                                <!--
                                <select multiple id="variavel" name="variaveis[]" class="form-control input-sm" size="10"
                                        ng-model="parameters.variaveis" ng-click="submitSelect()"
                                        style="padding:0px; font-size:12px; height: 225px;">
                                    <!-- <option value="">[Teste] teste <br> <strong>de</strong> texto</option> --Comment
                                    <option class="{{item.collection.variable.disabled}}" value="{{item}}" ng-repeat="item in data.variaveis"
                                            ng-disabled="item.collection.variable.disabled=='option-selected'"
                                            onclick="myfunc(this)">[{{item.collection.variable.year}}-{{item.collection.variable.varCode}}] {{item.collection.variable.label}}
                                    </option>
                                </select>
                                -->

                                <div id="tableVarHolder" style="height:220px;overflow:auto">
                                    <table id = "variavel" name="variaveis[]"  class="table table-hover table-condensed" size="10px"
                                        style="height:0px;" ng-model="parameters.variaveis">
                                        <tr>
                                            <!-- <th><input type="checkbox" id="selectBox"></th> -->
                                            <th style="vertical-align:middle;width:10px">Selecionar</th>
                                            <th style="vertical-align:middle;width:10px">Ano</th>
                                            <th>Código</th>
                                            <th></th>
                                            <th>Descrição</th>
                                            <!-- <th></th> -->
                                        </tr>
                                        <tr ng-repeat="item in data.variaveis" class="{{item.collection.variable.disabled}}">
                                            <td style="vertical-align:middle;text-align:center">
                                                <input type="checkbox" id="selectBox"  ng-model=item.collection.variable.checked ng-change="submitSelectFromTable(item.collection.variable)">
                                            </td>
                                            <!--
                                            <td style="vertical-align:middle;width:5px;">
                                                <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item)"></i>
                                                </a>
                                            </td> <!-- InfoVar(item) -->
                                            <td style="vertical-align:middle;text-align:center">{{item.collection.variable.yearToShow}}</td>
                                            <td style="vertical-align:middle;width:30px;">{{item.collection.variable.varCode}}</td>
                                            <td style="vertical-align:middle;width:5px;">
                                                <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item.collection.variable)"></i>
                                                </a>
                                            </td> <!-- InfoVar(item) -->
                                            <td style="vertical-align:middle;">{{item.collection.variable.label}}</td>
                                            <!--
                                            <td style="text-align:center;vertical-align:middle;"><input type="checkbox" id="V0001"></td>
                                            <td>>= d</td>
                                            <td><a data-toggle="modal" data-target="#GSCCModal">Editar 1 2 3 </a></td>
                                            -->
                                        </tr>
                                    </table>
                                </div> <!-- <div id="tableSelectedHolder"> -->

                            </div> <!-- div class="form-group" ng-controller="variaveisController" -->
                        </div> <!-- div id="censo2010" class="tab-pane show active" -->

                    </div> <!-- div class="tab-content" id="variablesTabContent" -->
                    </div>
                    <!-- Fim tab Variáveis originais -->


                    <!-- Fim tabs -->

                </div> <!-- div class="card-body" -->



            </div> <!-- class="card" SELEÇÃO DE VARIÁVEIS -->

            <!--
            <button type="button" class="btn btn-primary btn-sm" data-toggle="tooltip" title="Selecionar variáveis de tema" onclick="varSelect()" ng-click="submitSelect()" style="height:40px">
            <b>&nbsp;>&nbsp;</b>
            </button>
        -->

        </div> <!-- class="col-lg-6" -->

        <!-- Painel da direita -->
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header card-header-title">
                    <i class="fa fa-shopping-cart fa-fw"></i> CARRINHO DE VARIÁVEIS SELECIONADAS
                </div>
                <div class="card-body" style="padding:10px">
                    <div class="form-group" style="height:485px;overflow:auto">

                        <table id = "tabSelectedVariables" name="selectedVariables[]"  class="table table-striped table-condensed" size="10px"
                               style="height:0px;" ng-model="parameters.selectedVariables">
                            <tr>
                                <!--                  <th><input type="checkbox" id="selectBox"></th> -->
                                <th style="vertical-align:middle;width:10px">Ano</th>
                                <th>Código</th>
                                <th></th>
                                <th>Descrição</th>
                                <th>Excluir</th>
                                <!-- <th></th> -->
                            </tr>
                            <tr ng-repeat="item in parameters.selectedVariables">
                                <td style="vertical-align:middle;text-align:center">{{item.yearToShow}}</td>
                                <td style="vertical-align:middle;width:30px;">{{item.varCode}}</td>
                                <td style="vertical-align:middle;width:5px;">
                                    <a href="" data-toggle="modal" data-target="#myModal"><i title="Informação detalhada da variável" style="font-size: 1.3em;" class="fa fa-info-circle text-info" ng-click="InfoVar(item)"></i>
                                        <!--<span data-toggle="tooltip" title="Clique para detalhes da variável {{item.varCode}}" class="glyphicon glyphicon-question-sign" ng-click="InfoVar(item)">
                                            <b>?</b>
                                        </span>-->
                                    </a>
                                </td> <!-- InfoVar(item) -->
                                <!--
                                <td style="vertical-align: middle;">xx<a href="#"><span class="glyphicon glyphicon-question-sign"></span></a></td>
                                -->
                                <td style="vertical-align:middle;">{{item.label}}</td>
                                <td style="vertical-align:middle;width:30px;text-align:center" ng-click="RemoveVar(item,$index)">
                                    <a href="">
                                        <i title="Clique para excluir a variável {{item.varCode}} da lista de variáveis selecionadas" style="font-size: 1.3em;" class="fa fa-times text-danger"></i>
                                        <!--<span data-toggle="tooltip" title="Clique para excluir a variável {{item.varCode}} da lista de variáveis selecionadas" class="glyphicon glyphicon-remove" style="color:red">x</span>-->
                                    </a>
                                </td>
                                <!--
                                <td style="text-align:center;vertical-align:middle;"><input type="checkbox" id="V0001"></td>
                                <td>>= d</td>
                                <td><a data-toggle="modal" data-target="#GSCCModal">Editar 1 2 3 </a></td>
                                -->
                            </tr>
                        </table>



                    </div>
                </div>

            </div>

            <br><br>

            <!-- <div class="form-inline"> -->

            <!--
            <div class="form-group panel panel-default">
                <div class="panel-heading">Opções de arquivo de saida</div>
                <div class="panel-body" style="padding:5px">
                    <input id = "radioCSVComma" type="radio" name="formatoDados" ng-model="parameters.formatoDados" value="csv-commas" checked="checked">&nbspCSV delimitado por vírgula</input>
                    <br>
                    <input id = "radioSemicolon" type="radio" name="formatoDados" ng-model="parameters.formatoDados" value="csv-semicolon">&nbspCSV delimitado por ponto e vírgula</input>
                </div>
            </div>
            -->




            <!-- </div> <!-- class="form-inline" -->

        </div> <!-- class="col-lg-6" -->


    </div>
    </div>
    <!-- End Row -->

    <!-- Row 02 -->
    <div class="row">
        <div class="col-lg-12">
            <!-- <div class="form-inline"> -->

            <!--<div style="display:none">
                <h6>Opções de arquivo de saida</h6>
                <br><br>
                <input id = "radioCSVComma" type="radio" name="formatoDados" ng-model="parameters.formatoDados" value="csv-commas" checked="checked">
                &nbspCSV delimitado por vírgula
                </input>
                <br><br>
                <input id = "radioSemicolon" type="radio" name="formatoDados" ng-model="parameters.formatoDados" value="csv-semicolon">
                &nbspCSV delimitado por ponto e vírgula
                </input>
            </div>-->


            <!--
            <input id="teste" class="form-group btn btn-info" style="margin-left:200px;width:120px" type="submit" value="teste rem" ng-click="submitTESTErem()">
            -->
            <div ng-controller="tablesController" style="text-align: center">

                <button id="btnClearAllFields" class="form-group btn btn-secondary" style="height: 60px; width:300px" type="submit" ng-click="submitLimpa()">
                    <i class="fa fa-refresh"></i> Limpar todos os campos
                </button>
                <button id="btnConfSolic" class="form-group btn bg-dark-green" style="margin-left:25px;height: 60px; width:300px"
                        type="submit" ng-click="submitQuery()" onclick="EnableGera()" title="Clickando nessa opção o sistema gerará uma pré-visualização dos dados que você está extraindo">
                    <i class="fa fa-table"></i><b> Passo 3.</b> Visualizar e gerar arquivo
                </button>

                <input id="btnGeraArq" class="form-group btn btn-primary" style="display:none" type="submit" value="Gerar arquivo" ng-click="submitGeraArquivo()" disabled=""  onclick="disableGera()">
                </input>
            </div>


            <!--
            <input id="btnGeraArq2" class="form-group btn btn-primary" style="margin-left:10px;width:120px" type="submit" value="Gerar arq." ng-click="submitGeraArquivo2()">
            -->

            <!--<div id="msgConfGera" class="help-block" style="">{{msgConfirmaGera}}</div>
            <div id="arqGerado" style="display: none">{{baixarArq}}
                <a href="{{fileLink}}" download> {{texto}}</a>
            </div>-->
        </div> <!-- class="pull-right" -->


    </div>

    <!--
            <div style='height:185px;width:600px;overflow-x:auto'>
                <table id = 'tabSelectedVariablesModal' class='table table-striped table-condensed' size='10px' style='height:0px;font-size: 11px'>
                <tr>
                    <th style='vertical-align:middle;'>Ano</th>
                    <th>Código</th>
                </tr>
                <tr>
                    <td style='vertical-align:middle;'>Year</td>
                    <td style='vertical-align:middle;'>Label</td>
                </tr>
                <tr>
                    <td style='vertical-align:middle;'>Year1</td>
                    <td style='vertical-align:middle;'>Label1</td>
                </tr>
                </table>
            </div>
    -->

    <!-- End Row -->
</main>

<!--<footer class="footer">
    <div class="container text-center">
        <span class="text-muted">Plataforma desenvolvida pelo Centro de Estudos da Metrópole.</span>
    </div>
</footer>-->

<!-- Modal: About the project modal -->
<div class="modal fade" id="aboutProjectModal" tabindex="-1" role="dialog" aria-labelledby="aboutProjectModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="aboutProjectModalLabel">Plataforma de Extração <br> de dados censitários</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                A plataforma de extração de dados censitários ......
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- End of About the project modal -->

<!-- Modal: informações sobre cada variável -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="myModalLabel">Detalhes da variável {{codigoVariavel}} do Censo {{anoVariavel}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs" id="variablesInfoTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active"  href="#descTab" id="desc-tab" aria-controls="descTab"
                           role="tab" data-toggle="tab" aria-selected="true" title="Descrição detalhada">Descrição</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#popToAplyTab" id="popToApply-tab" aria-controls="popToAplyTab"
                           role="tab" data-toggle="tab" aria-selected="false" title="">População a qual se aplica</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#obsTab" id="obs-tab" aria-controls="obsTab"
                           role="tab" data-toggle="tab" aria-selected="false" title="">Observações</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#catTab" id="cat-tab" aria-controls="catTab"
                           role="tab" data-toggle="tab" aria-selected="false" title="">Categorias</a>
                    </li>
                </ul>
                <!-- Tab panels -->
                <div class="tab-content" id="variablesInfoTabContent">
                    <div role="tabpanel" class="tab-pane fade show active" id="descTab" aria-labelledby="desc-tab" style="margin-left:10px;height:200px;overflow-y:scroll">
                        <br>
                        <p style="white-space:pre-wrap;">{{textoDescricaoVar}}</p>
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="popToAplyTab" aria-labelledby="popToApply-tab" style="margin-left:10px;height:200px;overflow-y:scroll">
                        <br>
                        <p style="white-space:pre-wrap;">{{textoPopToApplyVar}}</p>
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="obsTab" aria-labelledby="obs-tab" style="margin-left:10px;height:200px;overflow-y:scroll">
                        <br>
                        <p style="white-space:pre-wrap;">{{textoObsVar}}</p>
                    </div>
                    <div role="tabpanel" class="tab-pane fade" id="catTab" aria-labelledby="cat-tab" style="margin-left:10px;height:200px;overflow-y:scroll">
                        <br>
                        <p style="white-space:pre-wrap;">{{textoCategoriaVar}}</p>
                        <table id = "tabCategory" name="category[]"  class="table table-condensed {{categoryTableClass}}" ng-model="data.category">
                            <tr>
                                <th style="vertical-align:middle;width:10px">Valor</th>
                                <th>Descrição</th>
                            </tr>
                            <tr ng-repeat="item in data.category">
                                <td ng-repeat="(key,val) in item" style="vertical-align:middle;">{{val}}</td>
                                <!-- <td style="vertical-align:middle;">{{item.label}}</td> -->
                            </tr>
                        </table>
                    </div>
                </div>

            </div> <!-- div class="modal-body" -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
            </div>
        </div> <!-- div class="modal-content" -->
    </div> <!-- div class="modal-dialog" -->
</div> <!-- div class="modal fade" id="myModal" -->

</body>

</html>
